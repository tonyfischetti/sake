<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Sake by tonyfischetti</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Sake</h1>
        <p>A self-documenting build automation tool</p>

        <p class="view"><a href="https://github.com/tonyfischetti/sake">View the Project on GitHub <small>tonyfischetti/sake</small></a></p>


        <ul>
          <li><a href="https://github.com/tonyfischetti/sake/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/tonyfischetti/sake/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/tonyfischetti/sake">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>
<a name="what-is-it" class="anchor" href="#what-is-it"><span class="octicon octicon-link"></span></a>What is it?</h3>

<p>Sake is a way to easily design, share, build, and visualize workflows with 
intricate interdependencies. Sake is self-documenting because the 
instructions for building a project also serve as the documentation of the 
projects' workflow. The first time it's run, sake will build the whole 
project in an order that automatically satisfies all dependencies. For all 
subsequent runs, sake will only rebuild the parts of the project that depend 
on changed files. This cuts down on unnecessary re-building and letâ€™s you 
concentrate on your work rather than memorizing the order in which commands 
have to be run.</p>

<p>Sake is free, open source software under a very permissive license (MIT Expat)
and is written in python.</p>

<h3>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h3>

<p>Consider this example workflow that examines correlates of DUI arrests with various adolescent-related data by state.</p>

<div class="highlight highlight-yaml"><pre><span class="nn">---</span>
<span class="c1"># Macros</span>
<span class="c1">#! TEEN_STATS_URL=http://mathforum.org/workshops/sum96/data.collections/datalibrary/US_TeenStats.XL.zip.xls</span>

<span class="l-Scalar-Plain">fetch teen stats</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">help</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">fetches various teen statstics from the web</span>
    <span class="c1"># no dependencies</span>
    <span class="l-Scalar-Plain">formula</span><span class="p-Indicator">:</span> <span class="p-Indicator">&gt;</span>
        <span class="no">curl -o teenstats.xls $TEEN_STATS_URL;</span>
    <span class="l-Scalar-Plain">output</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">teenstats.xls</span>

<span class="l-Scalar-Plain">formatting</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">help</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">formatting and conversion steps</span>
    <span class="l-Scalar-Plain">convert teen stats to csv</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">help</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">uses gnumerics ssconvert to convert ugly xls to csv and cleans it</span>
        <span class="l-Scalar-Plain">dependencies</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">teenstats.xls</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">convert.sh</span>
        <span class="l-Scalar-Plain">formula</span><span class="p-Indicator">:</span> <span class="p-Indicator">&gt;</span>
            <span class="no">./convert.sh;</span>
        <span class="l-Scalar-Plain">output</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">teenstats.csv</span>
    <span class="l-Scalar-Plain">format dui stats</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">help</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">format raw (copy and pasted) dui/state data using perl</span>
        <span class="l-Scalar-Plain">dependencies</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">rawdata.txt</span>
        <span class="l-Scalar-Plain">formula</span><span class="p-Indicator">:</span> <span class="p-Indicator">&gt;</span>
            <span class="no">perl -pe 's/^(\D+)\s+([\d,]+)\s+([\d,]+)\s*/\1\t\2\t\3\n/'</span>
            <span class="no">rawdata.txt | sed 's/,//g' &gt; duistats.tsv;</span>
        <span class="l-Scalar-Plain">output</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">duistats.tsv</span>

<span class="l-Scalar-Plain">find correlates</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">help</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">calls R script that finds correlated of DUI arrest in various teen statistics</span>
    <span class="l-Scalar-Plain">dependencies</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">duistats.tsv</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">teenstats.csv</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">dui-correlates.R</span>
    <span class="l-Scalar-Plain">formula</span><span class="p-Indicator">:</span> <span class="p-Indicator">&gt;</span>
        <span class="no">./dui-correlates.R</span>
    <span class="l-Scalar-Plain">output</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Rplots.pdf</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">lmcoeffs.txt</span>
<span class="nn">...</span>
</pre></div>

<p>This is an Sakefile to build/document a process that processes and formats two data files from the web and feeds it into an R script that searches for correlations and, ultimately, produces an output table and a graphic.</p>

<p>The entire process can be performed, start to finish by running the following command:</p>

<pre><code>sake
</code></pre>

<p>The mandatory "help" fields are used internally by sake to produce the following output when </p>

<pre><code>sake help
</code></pre>

<p>is run</p>

<pre><code>You can 'sake' one of the following...

"find correlates":
  - calls R script that finds correlated of DUI arrest in various teen statistics

formatting:
  - formatting and conversion steps

    "convert teen stats to csv":
      -  uses gnumerics ssconvert to convert ugly xls to csv and cleans it
    "format dui stats":
      -  format raw (copy and pasted) dui/state data using perl

"fetch teen stats":
  - fetches various teen statstics from the web

clean:
  -  remove all targets' outputs and start from scratch

visual:
  -  output visual representation of project's dependencies
</code></pre>

<p>Finally, a visual representation of the dependency diagram can be produce automagically by running the following command</p>

<pre><code>sake visual
</code></pre>

<p>Which produces the following image<img src="http://www.onthelambda.com/wp-content/uploads/2013/12/dependency-visualization.png" alt="Automagic dependency visualization"></p>

<h3>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h3>

<p>Coming soon</p>

<h3>
<a name="how-it-works" class="anchor" href="#how-it-works"><span class="octicon octicon-link"></span></a>How it works</h3>

<p>Coming soon</p>

<h3>
<a name="the-rules" class="anchor" href="#the-rules"><span class="octicon octicon-link"></span></a>The rules</h3>

<p>Coming soon</p>

<h3>
<a name="support-or-contact" class="anchor" href="#support-or-contact"><span class="octicon octicon-link"></span></a>Support or Contact</h3>

<p>If you're having trouble using sake; have a question; or want to contribute,
please email me at <a href="mailto:tony.fischetti@gmail.com">tony.fischetti@gmail.com</a></p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/tonyfischetti">tonyfischetti</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-46395813-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>